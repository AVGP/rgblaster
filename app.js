!function e(o,a,r){function t(s,n){if(!a[s]){if(!o[s]){var d="function"==typeof require&&require;if(!n&&d)return d(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=a[s]={exports:{}};o[s][0].call(l.exports,function(e){var a=o[s][1][e];return t(a?a:e)},l,l.exports,e,o,a,r)}return a[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)t(r[s]);return t}({1:[function(e,o,a){function r(){m.load.script("webfont","https:////ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"),m.load.image("space","gfx/space.jpg"),m.load.spritesheet("player","gfx/ship.png",64,33,4),m.load.spritesheet("orbs","gfx/orbs.png",11,11,3),m.load.spritesheet("bullets","gfx/shot.png",18,17,3),m.load.spritesheet("asteroid1","gfx/asteroid1.png",64,64),m.load.spritesheet("asteroid2","gfx/asteroid2.png",64,64),m.load.spritesheet("asteroid3","gfx/asteroid3.png",64,64),m.load.spritesheet("asteroid4","gfx/asteroid4.png",64,64),m.load.spritesheet("explosion","gfx/explosion.png",64,64)}function t(){m.world.setBounds(0,0,k,C);m.add.sprite(0,0,"space");p=m.input.keyboard.createCursorKeys(),m.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR,Phaser.Keyboard.X,Phaser.Keyboard.C,Phaser.Keyboard.V]),orbs=m.add.group(),orbs.enableBody=!0;for(var e=0;15>e;e++){var o=orbs.create(Math.random()*k-11,Math.random()*C-11,"orbs",Math.floor(3*Math.random()));m.physics.enable(o,Phaser.Physics.ARCADE),o.body.bounce.x=o.body.bounce.y=1,o.body.gravity.x=o.body.gravity.y=0,o.body.maxVelocity.set(20),o.angle=360*Math.random(),m.physics.arcade.accelerationFromRotation(o.rotation,20,o.body.acceleration)}bullets={r:m.add.group(),g:m.add.group(),b:m.add.group()};var a={r:0,g:1,b:2};for(var r in bullets)bullets.hasOwnProperty(r)&&(bullets[r].enableBody=!0,bullets[r].physicsBodyType=Phaser.Physics.ARCADE,bullets[r].createMultiple(5,"bullets",a[r]),bullets[r].setAll("anchor.x",.5),bullets[r].setAll("anchor.y",.5));u={r:m.add.group(),g:m.add.group(),b:m.add.group(),indestructible:m.add.group()},["r","g","b","indestructible"].forEach(function(o){for(e=0;5>e;e++)s(o)}),h=m.add.sprite(m.width/2,m.height/2,"player",1),h.anchor.set(.5),h.ship=m.add.sprite(0,0,"player",0),h.ship.anchor.set(.5),h.addChild(h.ship),m.physics.enable(h,Phaser.Physics.ARCADE),h.body.drag.set(100),h.body.bounce.set(1),h.body.maxVelocity.set(300),h.body.collideWorldBounds=!0,h.ship.body.moves=!1,m.camera.follow(h),f=m.add.group()}function i(){if(m.time.now>M+5e3){var e=["r","g","b"];s(e[Math.floor(Math.random()*e.length)]),M=m.time.now}["r","g","b","indestructible"].forEach(function(e){["r","g","b","indestructible"].forEach(function(o){m.physics.arcade.collide(u[e],u[o])}),m.physics.arcade.collide(h,u[e],function(e,o){o.kill();var a=f.create(e.body.x,e.body.y,"explosion",0);a.animations.add("boom",null,20,!1),a.animations.play("boom"),P--,0===P&&y(),b()}),u[e].forEachExists(n),"indestructible"!==e&&m.physics.arcade.collide(bullets[e],u[e],function(e,o){var a=f.create(o.body.x,o.body.y,"explosion",0);a.animations.add("boom",null,20,!1),a.animations.play("boom"),o.kill(),e.kill(),w++,b()})}),m.physics.arcade.overlap(h,orbs,c),p.up.isDown?m.physics.arcade.accelerationFromRotation(h.rotation,200,h.body.acceleration):h.body.acceleration.set(0),p.left.isDown?h.body.angularVelocity=-300:p.right.isDown?h.body.angularVelocity=300:h.body.angularVelocity=0,m.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&d(),m.input.keyboard.onUpCallback=function(e){switch(e.keyCode){case Phaser.Keyboard.X:h.frame=1;break;case Phaser.Keyboard.C:h.frame=2;break;case Phaser.Keyboard.V:h.frame=3}},orbs.forEachExists(n)}function s(e){var o=Math.floor(2*Math.random())+1,a=u[e].create(Math.random()*k,Math.random()*C,"asteroid"+o,0);switch(a.anchor.set(.5),a.animations.add("spin",null,10,!0),a.animations.play("spin"),m.physics.enable(a,Phaser.Physics.ARCADE),a.body.bounce.x=a.body.bounce.y=1,a.body.gravity.x=a.body.gravity.y=0,a.body.maxVelocity.set(100),a.body.offset.set(0,0),a.body.width=a.body.height=32,a.angle=360*Math.random(),m.physics.arcade.accelerationFromRotation(a.rotation,100*Math.random(),a.body.acceleration),e){case"r":a.tint=16746632;break;case"g":a.tint=8978312;break;case"b":a.tint=8947967;break;default:a.tint=16777096}}function n(e){e.body?(e.body.x<0?e.body.x=k:e.body.x>k&&(e.body.x=0),e.body.y<0?e.body.y=C:e.body.y>C&&(e.body.y=0)):(e.x<0?e.x=k:e.x>k&&(e.x=0),e.y<0?e.y=C:e.y>C&&(e.y=0))}function d(){if(m.time.now>v){var e=bullets[["r","g","b"][h.frame-1]].getFirstExists(!1);e&&(e.reset(h.body.x+30,h.body.y+20),e.lifespan=1500,e.rotation=h.rotation,m.physics.arcade.velocityFromRotation(h.rotation,400,e.body.velocity),v=m.time.now+100)}}function c(e,o){var a="r";switch(o.frame){case 0:a="r";break;case 1:a="g";break;case 2:a="b"}x[a]++;var r=bullets[a].create(0,0,"bullets",o.frame,!1);r.anchor.set(.5),o.reset(Math.random()*k-11,Math.random()*C-11,Math.floor(3*Math.random())),e.frame=o.frame+1,o.angle=360*Math.random(),m.physics.arcade.accelerationFromRotation(o.rotation,20,o.body.acceleration)}function l(){g=m.add.text(m.width/2,10,"Lifes: "+P+" - Score: 0",{font:"20px Orbitron",fill:"#fff",stroke:"#ccf",align:"center"}),g.fixedToCamera=!0,g.anchor.x=.5}function b(){g.text="Lifes: "+P+" - Score: "+w}function y(){var e=window.prompt("Game over!\nWhat is your name?","Player");E.push({name:e,score:w}),E=E.sort(function(e,o){return e.score<o.score});try{localStorage.setItem("highscores",JSON.stringify(E.slice(0,10)))}catch(o){}for(var a="",r=0;r<Math.min(10,E.length);r++)a+=E[r].name+" - "+E[r].score+"\n";alert("Highscores:\n"+a),window.location.reload()}var h,p,u,f,g,m=new Phaser.Game(800,600,Phaser.AUTO,"",{preload:r,create:t,update:i}),x={r:5,g:5,b:5},v=0,w=0,P=5,M=0,k=2024,C=1232,E=[];try{E=JSON.parse(localStorage.getItem("highscores")),null===E&&(E=[])}catch(A){}WebFontConfig={active:function(){m.time.events.add(Phaser.Timer.SECOND,l,this)},google:{families:["Orbitron::latin"]}}},{}]},{},[1]);
